{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/nico/Code/dreister_api/frontend/components/Page.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'node-fetch';\nimport { useEffect, useState } from 'react';\nimport { ScrapeProvider } from './scrapeContext'; //custom hook!\n\nfunction useScrapes() {\n  var _useState = useState([{\n    instagramId: ''\n  }]),\n      scrapes = _useState[0],\n      setScrapes = _useState[1];\n\n  var _useState2 = useState(0),\n      remainingScrapes = _useState2[0],\n      setRemainingScrapes = _useState2[1]; // Use effect accept only a function as parameter\n\n\n  useEffect(function () {\n    (function _callee() {\n      var res, nbScraps, data;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('Mounting or Updating');\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:3000/api/top100'));\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:3000/api/top100'));\n\n            case 6:\n              nbScraps = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(res.json());\n\n            case 9:\n              data = _context.sent;\n              setScrapes(data);\n              setRemainingScrapes(nbScraps);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  return scrapes;\n}\n\nvar Page = function Page(_ref) {\n  var children = _ref.children;\n  var scrapes = useScrapes();\n  return __jsx(ScrapeProvider, {\n    value: {\n      scrapes: scrapes\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, children));\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/nico/Code/dreister_api/frontend/components/Page.js"],"names":["fetch","useEffect","useState","ScrapeProvider","useScrapes","instagramId","scrapes","setScrapes","remainingScrapes","setRemainingScrapes","console","log","res","nbScraps","json","data","Page","children"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,YAAlB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,iBAA/B,C,CAEA;;AACA,SAASC,UAAT,GAAqB;AAAA,kBACQF,QAAQ,CAAC,CAAC;AAACG,IAAAA,WAAW,EAAC;AAAb,GAAD,CAAD,CADhB;AAAA,MACZC,OADY;AAAA,MACJC,UADI;;AAAA,mBAE6BL,QAAQ,CAAC,CAAD,CAFrC;AAAA,MAEZM,gBAFY;AAAA,MAEMC,mBAFN,kBAInB;;;AACAR,EAAAA,SAAS,CAAC,YAAW;AACnB,KAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACCS,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AADD;AAAA,+CAEmBX,KAAK,CAAC,kCAAD,CAFxB;;AAAA;AAEOY,cAAAA,GAFP;AAAA;AAAA,+CAGwBZ,KAAK,CAAC,kCAAD,CAH7B;;AAAA;AAGOa,cAAAA,QAHP;AAAA;AAAA,+CAIoBD,GAAG,CAACE,IAAJ,EAJpB;;AAAA;AAIOC,cAAAA,IAJP;AAKCR,cAAAA,UAAU,CAACQ,IAAD,CAAV;AACAN,cAAAA,mBAAmB,CAACI,QAAD,CAAnB;;AAND;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAQD,GATQ,EASP,EATO,CAAT;AAUA,SAAOP,OAAP;AACD;;AAED,IAAMU,IAAI,GAAG,SAAPA,IAAO,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AAC7B,MAAMX,OAAO,GAAGF,UAAU,EAA1B;AACA,SACE,MAAC,cAAD;AAAgB,IAAA,KAAK,EACnB;AAACE,MAAAA,OAAO,EAAPA;AAAD,KADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGW,QADH,CAHF,CADF;AASD,CAXD;;AAaA,eAAeD,IAAf","sourcesContent":["import fetch from 'node-fetch';\nimport {useEffect, useState} from 'react';\nimport { ScrapeProvider } from './scrapeContext';\n\n//custom hook!\nfunction useScrapes(){\n  const [scrapes,setScrapes]=useState([{instagramId:''}])\n  const [remainingScrapes, setRemainingScrapes] = useState(0)\n\n  // Use effect accept only a function as parameter\n  useEffect(function() {\n    (async () => {\n      console.log('Mounting or Updating')\n      const res = await fetch('http://localhost:3000/api/top100')\n      const nbScraps = await fetch('http://localhost:3000/api/top100')\n      const data = await res.json()\n      setScrapes(data)\n      setRemainingScrapes(nbScraps)\n    })()\n  },[])\n  return scrapes\n}\n\nconst Page = ({ children }) => {\n  const scrapes = useScrapes();\n  return (\n    <ScrapeProvider value={\n      {scrapes}\n    }>\n      <div className=\"page\">\n        {children}\n      </div>\n    </ScrapeProvider>\n  );\n}\n\nexport default Page;\n"]},"metadata":{},"sourceType":"module"}